(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-605565b8"],{"159b":function(t,e,o){var i=o("da84"),c=o("fdbc"),l=o("785a"),r=o("17c2"),a=o("9112"),n=function(t){if(t&&t.forEach!==r)try{a(t,"forEach",r)}catch(e){t.forEach=r}};for(var s in c)c[s]&&n(i[s]&&i[s].prototype);n(l)},"17c2":function(t,e,o){"use strict";var i=o("b727").forEach,c=o("a640"),l=c("forEach");t.exports=l?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},6432:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{ref:"collect",staticClass:"userCollect"},[o("div",{staticClass:"collectBox"},t._l(t.collectInfo,(function(e){return o("router-link",{key:e.pid,staticClass:"collectItem",attrs:{to:"/detail/"+e.pid}},[o("div",{staticClass:"c_imgBox"},[o("img",{attrs:{src:e.image,onerror:t.errorImg,alt:""}})]),o("div",{staticClass:"c_textBox"},[o("div",{staticClass:"title text_ellipsis"},[t._v(t._s(e.store_name))]),o("div",{staticClass:"textBottom"},[o("div",{staticClass:"price"},[t._v("￥"+t._s(e.price))]),o("div",{staticClass:"btn",on:{click:function(o){return o.preventDefault(),t.delCollect(e.pid)}}},[t._v(" 取消收藏 ")])])])])})),1),t.defaultTip?o("div",{staticClass:"defaultTip"}):t._e()])},c=[],l=o("2909"),r=(o("99af"),o("d3b7"),o("159b"),o("a434"),{data:function(){return{page:1,limit:20,collectInfo:[],times:0,errorImg:'this.src="'+o("04ec")+'"',defaultTip:!1}},methods:{getCollect:function(){var t=this,e=this.$store.state.token;axios({method:"GET",url:"http://47.115.51.185/api/collect/user",params:{page:this.page,limit:this.limit},headers:{"Authori-zation":"Bearer "+e}}).then((function(e){200==e.data.status&&(t.times++,t.collectInfo.length?t.collectInfo=[].concat(Object(l["a"])(t.collectInfo),Object(l["a"])(e.data.data)):t.collectInfo=e.data.data,t.collectInfo.length?t.defaultTip=!1:t.defaultTip=!0)}))},delCollect:function(t){var e=this,o=this.$store.state.token;axios({method:"POST",url:"http://47.115.51.185/api/collect/del",data:{category:"product",id:t},headers:{"Authori-zation":"Bearer "+o}}).then((function(o){200==o.data.status&&(e.delTip("取消成功"),e.collectInfo.forEach((function(o,i){o.pid==t&&e.collectInfo.splice(i,1)})),e.collectInfo.length?e.defaultTip=!1:e.defaultTip=!0)}))},delTip:function(t){var e=this;this.$store.dispatch("setErrorTipShowAsync",!0),this.$store.dispatch("setErrorTipAsync",t);var o=setTimeout((function(){e.$store.dispatch("setErrorTipShowAsync",!1),e.$store.state.isErrorTipShow||clearInterval(o)}),2e3)},handleScroll:function(){var t=this;this.$nextTick((function(){if(t.$refs.collect){var e=t.$refs.collect.clientHeight,o=t.$refs.collect.scrollTop,i=t.$refs.collect.scrollHeight;setTimeout((function(){e+o==i&&t.collectInfo.length>=t.times*t.limit&&(t.page++,t.getCollect())}),300)}}))}},created:function(){this.getCollect()},mounted:function(){window.addEventListener("scroll",this.handleScroll,!0)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)}}),a=r,n=(o("7053"),o("2877")),s=Object(n["a"])(a,i,c,!1,null,null,null);e["default"]=s.exports},7053:function(t,e,o){"use strict";o("a8cf")},a434:function(t,e,o){"use strict";var i=o("23e7"),c=o("da84"),l=o("23cb"),r=o("5926"),a=o("07fa"),n=o("7b0b"),s=o("65f0"),f=o("8418"),d=o("1dde"),u=d("splice"),h=c.TypeError,p=Math.max,v=Math.min,m=9007199254740991,g="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!u},{splice:function(t,e){var o,i,c,d,u,T,w=n(this),C=a(w),E=l(t,C),b=arguments.length;if(0===b?o=i=0:1===b?(o=0,i=C-E):(o=b-2,i=v(p(r(e),0),C-E)),C+o-i>m)throw h(g);for(c=s(w,i),d=0;d<i;d++)u=E+d,u in w&&f(c,d,w[u]);if(c.length=i,o<i){for(d=E;d<C-i;d++)u=d+i,T=d+o,u in w?w[T]=w[u]:delete w[T];for(d=C;d>C-i+o;d--)delete w[d-1]}else if(o>i)for(d=C-i;d>E;d--)u=d+i-1,T=d+o-1,u in w?w[T]=w[u]:delete w[T];for(d=0;d<o;d++)w[d+E]=arguments[d+2];return w.length=C-i+o,c}})},a640:function(t,e,o){"use strict";var i=o("d039");t.exports=function(t,e){var o=[][t];return!!o&&i((function(){o.call(null,e||function(){throw 1},1)}))}},a8cf:function(t,e,o){}}]);
//# sourceMappingURL=chunk-605565b8.ff3baada.js.map