{"version":3,"sources":["webpack:///./src/views/user/Order.vue?013e","webpack:///./src/views/user/Order.vue?dbf7","webpack:///src/views/user/Order.vue","webpack:///./src/views/user/Order.vue?6cd0","webpack:///./src/views/user/Order.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","_v","_s","userInfo","order_count","sum_price","_e","attrs","unpaid_count","unshipped_count","received_count","evaluated_count","complete_count","$store","state","isOrderListShow","ismore","domProps","moreText","staticRenderFns","data","orderList","defaultTip","isShow","created","init","methods","getInfo","axios","method","url","headers","token","status","handleScroll","$nextTick","ch","st","sh","page","mounted","window","addEventListener","destroyed","removeEventListener","watch","dispatch","personal","length","beforeRouteEnter","document","title","to","meta","next","component"],"mappings":"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","file":"js/chunk-136de377.b2bd9b3b.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=style&index=0&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"order\",staticClass:\"orderPage\"},[_c('div',{staticClass:\"orderBox\"},[_c('div',{staticClass:\"order_bg\"}),_c('div',[(_vm.isShow)?_c('div',{staticClass:\"orderHeader\"},[_c('h3',[_vm._v(\"订单信息\")]),_c('p',[_vm._v(\" 累计订单：\"+_vm._s(_vm.userInfo.order_count)+\"    总消费：￥\"+_vm._s(_vm.userInfo.sum_price)+\" \")])]):_vm._e(),(_vm.isShow)?_c('div',{staticClass:\"orderNav\"},[_c('router-link',{attrs:{\"to\":\"/user/order/0\",\"active-class\":\"active\"}},[_c('div',{staticClass:\"name\"},[_vm._v(\"待付款\")]),_c('div',{staticClass:\"num\"},[_vm._v(_vm._s(_vm.userInfo.unpaid_count))])]),_c('router-link',{attrs:{\"to\":\"/user/order/1\",\"active-class\":\"active\"}},[_c('div',{staticClass:\"name\"},[_vm._v(\"待发货\")]),_c('div',{staticClass:\"num\"},[_vm._v(_vm._s(_vm.userInfo.unshipped_count))])]),_c('router-link',{attrs:{\"to\":\"/user/order/2\",\"active-class\":\"active\"}},[_c('div',{staticClass:\"name\"},[_vm._v(\"待收货\")]),_c('div',{staticClass:\"num\"},[_vm._v(_vm._s(_vm.userInfo.received_count))])]),_c('router-link',{attrs:{\"to\":\"/user/order/3\",\"active-class\":\"active\"}},[_c('div',{staticClass:\"name\"},[_vm._v(\"待评价\")]),_c('div',{staticClass:\"num\"},[_vm._v(_vm._s(_vm.userInfo.evaluated_count))])]),_c('router-link',{attrs:{\"to\":\"/user/order/5\",\"active-class\":\"active\"}},[_c('div',{staticClass:\"name\"},[_vm._v(\"已完成\")]),_c('div',{staticClass:\"num\"},[_vm._v(_vm._s(_vm.userInfo.complete_count))])])],1):_vm._e(),_c('router-view'),(_vm.$store.state.isOrderListShow && _vm.ismore)?_c('div',{staticClass:\"moreLoading\",domProps:{\"innerHTML\":_vm._s(_vm.moreText)}}):_vm._e(),(!_vm.$store.state.isOrderListShow)?_c('div',{staticClass:\"loading\"}):_vm._e()],1)]),(_vm.defaultTip)?_c('div',{staticClass:\"defaultTip\"}):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"orderPage\" ref=\"order\">\r\n    <div class=\"orderBox\">\r\n      <div class=\"order_bg\"></div>\r\n      <div>\r\n        <div class=\"orderHeader\" v-if=\"isShow\">\r\n          <h3>订单信息</h3>\r\n          <p>\r\n            累计订单：{{ userInfo.order_count }}&nbsp;&nbsp;&nbsp; 总消费：￥{{\r\n              userInfo.sum_price\r\n            }}\r\n          </p>\r\n        </div>\r\n        <div class=\"orderNav\" v-if=\"isShow\">\r\n          <router-link to=\"/user/order/0\" active-class=\"active\">\r\n            <div class=\"name\">待付款</div>\r\n            <div class=\"num\">{{ userInfo.unpaid_count }}</div>\r\n          </router-link>\r\n          <router-link to=\"/user/order/1\" active-class=\"active\">\r\n            <div class=\"name\">待发货</div>\r\n            <div class=\"num\">{{ userInfo.unshipped_count }}</div>\r\n          </router-link>\r\n          <router-link to=\"/user/order/2\" active-class=\"active\">\r\n            <div class=\"name\">待收货</div>\r\n            <div class=\"num\">{{ userInfo.received_count }}</div>\r\n          </router-link>\r\n          <router-link to=\"/user/order/3\" active-class=\"active\">\r\n            <div class=\"name\">待评价</div>\r\n            <div class=\"num\">{{ userInfo.evaluated_count }}</div>\r\n          </router-link>\r\n          <router-link to=\"/user/order/5\" active-class=\"active\">\r\n            <div class=\"name\">已完成</div>\r\n            <div class=\"num\">{{ userInfo.complete_count }}</div>\r\n          </router-link>\r\n        </div>\r\n        <router-view></router-view>\r\n        <div\r\n          class=\"moreLoading\"\r\n          v-if=\"$store.state.isOrderListShow && ismore\"\r\n          v-html=\"moreText\"\r\n        ></div>\r\n        <div class=\"loading\" v-if=\"!$store.state.isOrderListShow\"></div>\r\n      </div>\r\n    </div>\r\n    <div class=\"defaultTip\" v-if=\"defaultTip\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      userInfo: \"\",\r\n      orderList: \"\",\r\n      defaultTip: false,\r\n      isShow: false,\r\n      ismore: false,\r\n      moreText: \"<span></span>正在加载，不要急~\",\r\n    };\r\n  },\r\n  created() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.getInfo();\r\n    },\r\n    getInfo() {\r\n      let token = this.$store.state.token;\r\n      axios({\r\n        method: \"GET\",\r\n        url: `http://47.115.51.185/api/order/data`,\r\n        headers: {\r\n          \"Authori-zation\": \"Bearer \" + token,\r\n        },\r\n      }).then((data) => {\r\n        if (data.data.status == 200) {\r\n          this.userInfo = data.data.data;\r\n          this.isShow = true;\r\n        }\r\n      });\r\n    },\r\n    handleScroll() {\r\n      this.$nextTick(() => {\r\n        if (this.$refs.order) {\r\n          let ch = this.$refs.order.clientHeight;\r\n          let st = this.$refs.order.scrollTop;\r\n          let sh = this.$refs.order.scrollHeight;\r\n          let d = setTimeout(() => {\r\n            if (ch + st == sh) {\r\n              let page = this.$store.state.detail.page;\r\n              if (this.$store.state.detail.getPage) {\r\n                page++;\r\n                this.$store.dispatch(\"detail/setPageAsync\", page);\r\n              }\r\n            }\r\n          }, 300);\r\n        }\r\n      });\r\n    },\r\n  },\r\n  mounted: function () {\r\n    window.addEventListener(\"scroll\", this.handleScroll, true);\r\n  },\r\n  destroyed: function () {\r\n    window.removeEventListener(\"scroll\", this.handleScroll);\r\n  },\r\n  watch: {\r\n    \"$store.state.personal.orderList\"(newVal, oldVal) {\r\n      if (\r\n        this.$store.state.personal.orderList.length <=\r\n        this.$store.state.detail.times * 20\r\n      ) {\r\n        this.$store.dispatch(\"setOrderListShowAsync\", true);\r\n        if (this.$store.state.personal.orderList.length) {\r\n          this.ismore = true;\r\n          this.defaultTip = false;\r\n          if (\r\n            this.$store.state.personal.orderList.length <\r\n            this.$store.state.detail.times * 20\r\n          ) {\r\n            this.$store.dispatch(\"detail/setGetPageAsync\", false);\r\n            this.moreText = \"我是有底线的！！！\";\r\n          } else {\r\n            this.$store.dispatch(\"detail/setGetPageAsync\", true);\r\n            this.moreText = \"<span></span>正在加载，不要急~\";\r\n          }\r\n        } else {\r\n          this.ismore = false;\r\n          this.defaultTip = true;\r\n        }\r\n      }\r\n    },\r\n    \"$route.path\"() {\r\n      this.defaultTip = false;\r\n    },\r\n  },\r\n  beforeRouteEnter(to, from, next){\r\n    document.title = to.meta.title;\r\n    next();\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n@import \"../../assets/less/variable.less\";\r\n.orderPage {\r\n  height: 100%;\r\n  position: relative;\r\n  background-color: @bgColor4;\r\n  overflow-y: scroll;\r\n\r\n  .defaultTip {\r\n    width: 150px;\r\n    height: 150px;\r\n    background: url(../../assets/img/cart_default.png) no-repeat 0 0 / cover;\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n  }\r\n}\r\n.orderBox {\r\n  min-height: 100%;\r\n  position: relative;\r\n  background-color: @bgColor4;\r\n\r\n  .order_bg {\r\n    width: 100%;\r\n    height: 150px;\r\n    background-color: @bgColor3;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    z-index: 0;\r\n  }\r\n\r\n  .order_bg + div {\r\n    padding: 0 @padding3;\r\n    position: relative;\r\n    z-index: 10;\r\n  }\r\n\r\n  .orderHeader {\r\n    padding: 25px 0;\r\n    h3 {\r\n      font-size: 18px;\r\n      color: @color2;\r\n      margin-bottom: @margin2;\r\n    }\r\n\r\n    p {\r\n      font-size: 14px;\r\n      color: @color5;\r\n    }\r\n  }\r\n  .orderNav {\r\n    display: flex;\r\n    background-color: @bgColor2;\r\n    border-radius: 5px;\r\n    margin-bottom: @margin2;\r\n\r\n    & > a {\r\n      flex: 1;\r\n      font-size: 14px;\r\n      text-align: center;\r\n      color: @color1;\r\n      padding: @padding3 0;\r\n      position: relative;\r\n\r\n      .num {\r\n        margin-top: 3px;\r\n      }\r\n    }\r\n\r\n    & > .active {\r\n      font-weight: bold;\r\n    }\r\n\r\n    & > .active::after {\r\n      content: \"\";\r\n      display: block;\r\n      width: 50%;\r\n      height: 0;\r\n      border-bottom: 3px solid @borderColor2;\r\n      position: absolute;\r\n      bottom: 0;\r\n      left: 50%;\r\n      transform: translateX(-50%);\r\n    }\r\n  }\r\n\r\n  .moreLoading {\r\n    display: flex;\r\n    font-size: 14px;\r\n    justify-content: center;\r\n    color: @color4;\r\n    span {\r\n      display: inline-block;\r\n      width: 19px;\r\n      height: 19px;\r\n      background: url(../../assets/loader.gif) no-repeat 0 0 / cover;\r\n    }\r\n  }\r\n\r\n  .loading {\r\n    width: 80px;\r\n    height: 80px;\r\n    background: url(../../assets/loader.gif) no-repeat 0 0 / cover;\r\n    margin: 50px auto;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Order.vue?vue&type=template&id=368201d1&\"\nimport script from \"./Order.vue?vue&type=script&lang=js&\"\nexport * from \"./Order.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Order.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}