(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-749c406c"],{"00b4":function(t,e,s){"use strict";s("ac1f");var i=s("23e7"),a=s("da84"),n=s("c65b"),o=s("e330"),r=s("1626"),c=s("861d"),l=function(){var t=!1,e=/[ac]/;return e.exec=function(){return t=!0,/./.exec.apply(this,arguments)},!0===e.test("abc")&&t}(),u=a.Error,d=o(/./.test);i({target:"RegExp",proto:!0,forced:!l},{test:function(t){var e=this.exec;if(!r(e))return d(this,t);var s=n(e,this,t);if(null!==s&&!c(s))throw new u("RegExp exec method returned something other than an Object or null");return!!s}})},"04ec":function(t,e,s){t.exports=s.p+"img/error.ee4b20bc.gif"},"107c":function(t,e,s){var i=s("d039"),a=s("da84"),n=a.RegExp;t.exports=i((function(){var t=n("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},1574:function(t,e,s){},1829:function(t,e,s){"use strict";s("1574")},"1d52":function(t,e,s){},"303a":function(t,e,s){"use strict";s("59db")},3939:function(t,e,s){},"4be6":function(t,e,s){},"543b":function(t,e,s){},"59db":function(t,e,s){},"651c":function(t,e,s){"use strict";s("543b")},"76fb":function(t,e,s){},"86ca":function(t,e,s){"use strict";s("4be6")},9263:function(t,e,s){"use strict";var i=s("c65b"),a=s("e330"),n=s("577e"),o=s("ad6d"),r=s("9f7f"),c=s("5692"),l=s("7c73"),u=s("69f3").get,d=s("fce3"),h=s("107c"),f=c("native-string-replace",String.prototype.replace),p=RegExp.prototype.exec,v=p,m=a("".charAt),I=a("".indexOf),_=a("".replace),x=a("".slice),g=function(){var t=/a/,e=/b*/g;return i(p,t,"a"),i(p,e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),C=r.BROKEN_CARET,$=void 0!==/()??/.exec("")[1],b=g||$||C||d||h;b&&(v=function(t){var e,s,a,r,c,d,h,b=this,w=u(b),y=n(t),k=w.raw;if(k)return k.lastIndex=b.lastIndex,e=i(v,k,y),b.lastIndex=k.lastIndex,e;var S=w.groups,T=C&&b.sticky,A=i(o,b),E=b.source,q=0,O=y;if(T&&(A=_(A,"y",""),-1===I(A,"g")&&(A+="g"),O=x(y,b.lastIndex),b.lastIndex>0&&(!b.multiline||b.multiline&&"\n"!==m(y,b.lastIndex-1))&&(E="(?: "+E+")",O=" "+O,q++),s=new RegExp("^(?:"+E+")",A)),$&&(s=new RegExp("^"+E+"$(?!\\s)",A)),g&&(a=b.lastIndex),r=i(p,T?s:b,O),T?r?(r.input=x(r.input,q),r[0]=x(r[0],q),r.index=b.lastIndex,b.lastIndex+=r[0].length):b.lastIndex=0:g&&r&&(b.lastIndex=b.global?r.index+r[0].length:a),$&&r&&r.length>1&&i(f,r[0],s,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(r[c]=void 0)})),r&&S)for(r.groups=d=l(null),c=0;c<S.length;c++)h=S[c],d[h[0]]=r[h[1]];return r}),t.exports=v},"97cb":function(t,e,s){"use strict";s("1d52")},"9f7f":function(t,e,s){var i=s("d039"),a=s("da84"),n=a.RegExp,o=i((function(){var t=n("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),r=o||i((function(){return!n("a","y").sticky})),c=o||i((function(){var t=n("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));t.exports={BROKEN_CARET:c,MISSED_STICKY:r,UNSUPPORTED_Y:o}},a15b:function(t,e,s){"use strict";var i=s("23e7"),a=s("e330"),n=s("44ad"),o=s("fc6a"),r=s("a640"),c=a([].join),l=n!=Object,u=r("join",",");i({target:"Array",proto:!0,forced:l||!u},{join:function(t){return c(o(this),void 0===t?",":t)}})},a30b:function(t,e,s){},ac1f:function(t,e,s){"use strict";var i=s("23e7"),a=s("9263");i({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},ad6d:function(t,e,s){"use strict";var i=s("825a");t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},bbf2:function(t,e,s){"use strict";s("a30b")},c84b:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"detail",staticClass:"detail"},[s("div",{staticClass:"detailBox"},[t.storeInfo?s("detail-banner",{attrs:{id:"detail1"}}):t._e(),t.storeInfo?s("detail-info"):t._e(),t.storeInfo?[s("div",{directives:[{name:"show",rawName:"v-show",value:"[]"!=JSON.stringify(t.$store.state.detail.allInfo.productValue),expression:"\n          JSON.stringify($store.state.detail.allInfo.productValue) != '[]'\n        "}],staticClass:"userChoose",on:{click:function(e){return t.userChoose(!0)}}},[s("div",{staticClass:"chose"},[t._v(" 已选择："),s("span",[t._v(t._s(t.chose))])]),s("i",{staticClass:"bi bi-chevron-right"})])]:t._e(),t.storeInfo?s("div",{staticClass:"userScore",attrs:{id:"detail2"}},[s("div",{staticClass:"scoreNum"},[t._v(" 用户评价("+t._s(t.$store.state.detail.allInfo.replyCount)+") ")]),s("div",{staticClass:"praise"},[s("span",[t._v(t._s(t.$store.state.detail.allInfo.replyChance)+"%")]),t._v("好评率"),s("i",{staticClass:"bi bi-chevron-right"})])]):t._e(),t.storeInfo?s("detail-recommend",{attrs:{id:"detail3"}}):t._e(),t.storeInfo?s("detail-introduce",{attrs:{id:"detail4"}}):t._e(),t.navShow?s("div",{staticClass:"storeNav",style:"opacity:"+t.opacity},[s("span",{class:{active:0==t.navIndex},on:{click:function(e){t.navIndex=0,t.clickTo(t.navIndex)}}},[t._v("商品")]),s("span",{class:{active:1==t.navIndex},on:{click:function(e){t.navIndex=1,t.clickTo(t.navIndex)}}},[t._v("评价")]),s("span",{class:{active:2==t.navIndex},on:{click:function(e){t.navIndex=2,t.clickTo(t.navIndex)}}},[t._v("推荐")]),s("span",{class:{active:3==t.navIndex},on:{click:function(e){t.navIndex=3,t.clickTo(t.navIndex)}}},[t._v("详情")])]):t._e(),t.$store.state.isDetailMaskShow?s("div",{staticClass:"mask",on:{click:function(e){return e.target!==e.currentTarget?null:t.userChoose(!1)}}},[s("detail-choose")],1):t._e(),t.storeInfo?s("detail-bottom",{attrs:{id:"detail4"}}):t._e(),t.storeInfo?t._e():s("span",{staticClass:"loading"})],2)])},a=[],n=(s("d3b7"),s("159b"),s("a15b"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("swiper",{staticClass:"swiper",attrs:{options:t.swiperOption}},[t._l(t.$store.state.detail.storeInfo.slider_image,(function(e,i){return s("swiper-slide",{key:i},[s("img",{attrs:{src:e,onerror:t.errorImg,alt:""}})])})),s("div",{staticClass:"imgIndex"},[t._v(t._s(t.index+1)+"/"+t._s(t.$store.state.detail.storeInfo.slider_image.length))])],2)}),o=[],r=s("7212"),c=(s("bbe3"),s("4da1"));c["default"].use([c["EffectFade"]]);var l=null,u={name:"swiper-fade-effect",components:{Swiper:r["Swiper"],SwiperSlide:r["SwiperSlide"]},data:function(){return{errorImg:'this.src="'+s("04ec")+'"',index:0,swiperOption:{effect:"fade",fadeEffect:{crossFade:!0},on:{slideChange:function(){l.getIndex(this.realIndex)}}}}},methods:{getIndex:function(t){this.index=t}},created:function(){l=this}},d=u,h=(s("f1d2"),s("2877")),f=Object(h["a"])(d,n,o,!1,null,null,null),p=f.exports,v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"storeInfo"},[s("div",{staticClass:"storePrice"},[s("div",{staticClass:"price"},[t._v("￥"+t._s(t.$store.state.detail.storeInfo.price))]),s("div",{staticClass:"vip_Price"},[t._v("￥"+t._s(t.$store.state.detail.storeInfo.vip_price))]),t._m(0)]),s("div",{staticClass:"storeName"},[t._v(t._s(t.$store.state.detail.storeInfo.store_name))]),s("div",{staticClass:"storeOther"},[s("span",[t._v("原价:￥"+t._s(t.$store.state.detail.storeInfo.ot_price))]),s("span",[t._v("库存:"+t._s(t.$store.state.detail.storeInfo.stock+t.$store.state.detail.storeInfo.unit_name))]),s("span",[t._v("销量:"+t._s(t.$store.state.detail.storeInfo.fsales+t.$store.state.detail.storeInfo.unit_name))])])])},m=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"vip"},[s("span",[t._v("VIP")])])}],I=(s("651c"),{}),_=Object(h["a"])(I,v,m,!1,null,null,null),x=_.exports,g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"detailRecommend"},[s("div",{staticClass:"title"},[s("i",{staticClass:"bi bi-hand-thumbs-up"}),s("span",[t._t("default",(function(){return[t._v("优品推荐")]}))],2),s("i",{staticClass:"bi bi-hand-thumbs-up"})]),s("swiper",{staticClass:"swiper",attrs:{options:t.swiperOption}},[t._l(t.$store.state.detail.allInfo.good_list,(function(e){return s("swiper-slide",{key:e.id},[s("router-link",{staticClass:"storeItem",attrs:{to:"/detail/"+e.id},nativeOn:{click:function(e){return t.refresh.apply(null,arguments)}}},[s("div",{staticClass:"imgBox"},[s("img",{attrs:{src:e.image,onerror:t.errorImg,alt:""}})]),s("p",{staticClass:"text_ellipsis"},[t._v(t._s(e.store_name))]),s("span",[t._v("￥"+t._s(e.price))])])],1)})),s("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)],1)},C=[];c["default"].use([c["Pagination"],c["Grid"]]);var $={name:"swiper-loop-group",components:{Swiper:r["Swiper"],SwiperSlide:r["SwiperSlide"]},data:function(){return{errorImg:'this.src="'+s("04ec")+'"',swiperOption:{autoHeight:!0,slidesPerView:3,slidesPerGroup:3,grid:{fill:"row",rows:2},pagination:{el:".swiper-pagination",clickable:!0}}}},methods:{refresh:function(){this.$router.go(0)}}},b=$,w=(s("bbf2"),Object(h["a"])(b,g,C,!1,null,null,null)),y=w.exports,k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"detailIntroduce"},[s("div",{staticClass:"title"},[t._v("产品介绍")]),s("div",{staticClass:"mainInfo",domProps:{innerHTML:t._s(t.$store.state.detail.storeInfo.description)}})])},S=[],T=(s("97cb"),{}),A=Object(h["a"])(T,k,S,!1,null,null,null),E=A.exports,q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"storeBottom"},[s("div",{staticClass:"service",on:{click:function(e){return t.errorTip("当前服务不可用")}}},[s("i",{staticClass:"bi bi-headset"}),s("span",[t._v("客服")])]),s("div",{staticClass:"collect",on:{click:t.clickCollect}},[s("i",{staticClass:"bi",class:t.$store.state.detail.storeInfo.userCollect?"bi-star-fill":"bi-star"}),s("span",[t._v("收藏")])]),s("router-link",{staticClass:"toCart",attrs:{to:"/cart"}},[s("i",{staticClass:"bi bi-cart4"}),s("span",[t._v("购物车")])]),s("div",{staticClass:"btn"},[s("div",{staticClass:"addToCart",on:{click:t.isToCart}},[t._v("加入购物车")]),s("div",{staticClass:"toBuy"},[t._v("立即购买")])])],1)},O=[],N={methods:{clickCollect:function(){var t=this;if(localStorage.getItem("token")){var e=this.$store.state.detail.storeInfo;e.userCollect=!this.$store.state.detail.storeInfo.userCollect,this.$store.dispatch("detail/setStoreInfoAsync",e);var s=this.$store.state.token,i=e.id;e.userCollect?axios({method:"POST",url:"http://47.115.51.185/api/collect/add",headers:{"Authori-zation":"Bearer "+s},data:{id:i,category:"product"}}).then((function(e){200==e.data.status&&t.errorTip("收藏成功")})):axios({method:"POST",url:"http://47.115.51.185/api/collect/del",headers:{"Authori-zation":"Bearer "+s},data:{id:i,category:"product"}}).then((function(e){200==e.data.status&&t.errorTip("已取消收藏")}))}else this.$router.push("/login")},isToCart:function(){localStorage.getItem("token")?this.$store.state.detail.isChoose?this.addToCart():(this.$store.dispatch("setDetailMaskShowAsync",!0),this.$store.dispatch("detail/setIsChooseAsync",!0)):this.$router.push("/login")},addToCart:function(){var t=this;if(0!==this.$store.state.detail.unique){var e=this.$store.state.token,s=this.$store.state.detail.allInfo.productValue,i=this.$store.state.detail.chooseNum,a="";this.$store.state.detail.unique&&(a=this.$store.state.detail.unique);var n="",o="";if(0!=s.length)for(var r in s)s[r].unique==a&&(n=s[r].product_id,o=s[r].image);else n=this.$store.state.detail.storeInfo.id,o=this.$store.state.detail.storeInfo.image;axios({method:"POST",url:"http://47.115.51.185/api/cart/add",headers:{"Authori-zation":"Bearer "+e},data:{cartNum:i,new:0,productId:n,uniqueId:a,imgUrl:o}}).then((function(e){200==e.data.status?(t.$store.dispatch("setDetailMaskShowAsync",!1),t.$store.dispatch("detail/setIsChooseAsync",!1),t.errorTip("添加成功")):(t.$store.dispatch("setDetailMaskShowAsync",!1),t.$store.dispatch("detail/setIsChooseAsync",!1),t.errorTip(e.data.msg))}))}else this.errorTip("库存不足")},errorTip:function(t){var e=this;this.$store.dispatch("setErrorTipShowAsync",!0),this.$store.dispatch("setErrorTipAsync",t);var s=setTimeout((function(){e.$store.dispatch("setErrorTipShowAsync",!1),e.$store.state.isErrorTipShow||clearInterval(s)}),2e3)}}},D=N,j=(s("ea7d"),Object(h["a"])(D,q,O,!1,null,null,null)),R=j.exports,B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"typeChoose"},[s("div",{staticClass:"close",on:{click:function(e){return t.userChoose(!1)}}},[s("i",{staticClass:"bi bi-x-lg"})]),s("div",{staticClass:"goodsInfo"},[s("div",{staticClass:"imgBox"},[s("img",{attrs:{src:t.image,alt:""}})]),s("div",{staticClass:"textBox"},[s("p",{staticClass:"text_ellipsis"},[t._v(" "+t._s(t.$store.state.detail.storeInfo.store_name)+" ")]),s("div",[t._v(" ￥"+t._s(t.$store.state.detail.storeInfo.price)),s("span",[t._v("库存："+t._s(t.stock))])])])]),s("div",{staticClass:"chooseBox"},[t._l(t.$store.state.detail.allInfo.productAttr,(function(t,e){return s("choose-item",{key:e,attrs:{citem:t,cindex:e}})})),s("detail-count")],2)])},P=[],V=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chooseItem"},[s("div",{staticClass:"chooseName"},[t._v(t._s(t.citem.attr_name))]),s("div",{staticClass:"chooseList"},t._l(t.citem.attr_values,(function(e,i){return s("span",{key:i,class:{active:t.index==i},on:{click:function(e){t.index=i,t.chooseItem(i)}}},[t._v(t._s(e))])})),0)])},M=[],U={data:function(){return{index:0}},props:["citem","cindex"],methods:{chooseItem:function(t){var e=this.$store.state.detail.allInfo,s=this.$store.state.detail.allInfo.productAttr[this.cindex].attr_value;s.forEach((function(t){t.check=!1})),s[t].check=!0,e.productAttr[this.cindex].attr_value=s,this.$store.dispatch("detail/setAllInfoAsync",e)}},created:function(){var t=this,e=this.citem.attr_value;e.forEach((function(e,s){e.check&&(t.index=s)}))}},L=U,z=(s("86ca"),Object(h["a"])(L,V,M,!1,null,null,null)),J=z.exports,G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"detailCount"},[s("div",{staticClass:"chooseName"},[t._v("数量")]),s("div",{staticClass:"countBox"},[s("div",{staticClass:"reduce",class:t.isDisabled?"disabled":"",on:{click:t.reduceNum}},[s("i",{staticClass:"bi bi-dash"})]),s("div",{staticClass:"num"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.num,expression:"num"}],attrs:{type:"number"},domProps:{value:t.num},on:{blur:t.changeNum,input:function(e){e.target.composing||(t.num=e.target.value)}}})]),s("div",{staticClass:"plus",on:{click:t.plusNum}},[s("i",{staticClass:"bi bi-plus"})])])])},K=[],F=(s("ac1f"),s("00b4"),{data:function(){return{num:1,isDisabled:!1}},methods:{changeNum:function(){/^\d*$/.test(this.num)?(!this.num||this.num<1)&&(this.num=1):this.num=1,this.num>1?this.isDisabled=!1:this.isDisabled=!0,this.saveNum(this.num)},plusNum:function(){this.num++,this.num>1&&(this.isDisabled=!1),this.saveNum(this.num)},reduceNum:function(){this.num--,this.num<=1&&(this.num=1,this.isDisabled=!0),this.saveNum(this.num)},saveNum:function(t){this.$store.dispatch("detail/setChooseNumAsync",t)}},created:function(){1==this.num?this.isDisabled=!0:this.isDisabled=!1}}),H=F,Y=(s("c935"),Object(h["a"])(H,G,K,!1,null,null,null)),Q=Y.exports,W={data:function(){return{stock:this.$store.state.detail.storeInfo.stock,image:this.$store.state.detail.storeInfo.image}},components:{ChooseItem:J,DetailCount:Q},methods:{userChoose:function(t){this.$store.dispatch("setDetailMaskShowAsync",t),this.$store.dispatch("detail/setIsChooseAsync",t)}},watch:{"$store.state.detail.unique":{handler:function(t,e){var s=this.$store.state.detail.allInfo.productValue,i=this.$store.state.detail.unique;if(0!==i){if(0!=s.length)for(var a in s)s[a].unique==i&&(this.stock=s[a].stock,this.image=s[a].image)}else this.stock=0},deep:!0,immediate:!0}}},X=W,Z=(s("303a"),Object(h["a"])(X,B,P,!1,null,null,null)),tt=Z.exports,et={data:function(){return{storeId:0,storeInfo:"",navIndex:0,opacity:0,navShow:!1,chose:"",choseShow:!1,unique:""}},components:{DetailBanner:p,DetailInfo:x,DetailRecommend:y,DetailIntroduce:E,DetailBottom:R,DetailChoose:tt},methods:{init:function(){var t=this,e=this.$store.state.token;axios({method:"GET",url:"http://47.115.51.185/api/product/detail/"+this.storeId,headers:{"Authori-zation":"Bearer "+e}}).then((function(e){if(200==e.data.status){t.storeInfo=e.data.data.storeInfo;var s=e.data.data;if(0!=e.data.data.productValue.length){var i=e.data.data.productAttr,a=[];i.forEach((function(t){a.push(t.attr_values[0]),t.attr_value[0].check=!0})),s.productAttr=i;var n=e.data.data.productValue;t.chose=a.join(","),n[a.join(",")]?t.unique=n[a.join(",")].unique:t.unique=0,t.$store.dispatch("detail/setUniqueAsync",t.unique)}t.$store.dispatch("detail/setAllInfoAsync",s),t.$store.dispatch("detail/setStoreInfoAsync",t.storeInfo),document.title=t.$store.state.detail.storeInfo.store_name}}))},userChoose:function(t){this.$store.dispatch("setDetailMaskShowAsync",t),this.$store.dispatch("detail/setIsChooseAsync",t)},errorTip:function(t){var e=this;this.$store.dispatch("setErrorTipShowAsync",!0),this.$store.dispatch("setErrorTipAsync",t);var s=setTimeout((function(){e.$store.dispatch("setErrorTipShowAsync",!1),e.$store.state.isErrorTipShow||(clearInterval(s),e.$router.push("/"))}),1500)},handleScroll:function(){var t=this;this.$nextTick((function(){if(null!=document.querySelector("#detail1")){var e=0;t.$refs.detail&&(e=t.$refs.detail.scrollTop);var s=document.querySelector("#detail4").offsetTop,i=document.querySelector("#detail2").offsetTop,a=document.querySelector("#detail3").offsetTop;t.navShow=0!=e,t.opacity=e<=200?e/200:1,e<i-51?t.navIndex=0:e>=i-51&&e<a-51?t.navIndex=1:e>=a-51&&e<s-51?t.navIndex=2:e>=s-51&&(t.navIndex=3)}}))},clickTo:function(t){document.querySelector("#detail"+(t+1)).offsetTop?this.$refs.detail.scrollTop=document.querySelector("#detail"+(t+1)).offsetTop-51:this.$refs.detail.scrollTop=document.querySelector("#detail"+(t+1)).offsetTop}},watch:{unique:function(t){var e=this.$store.state.detail.allInfo.productValue;for(var s in e)e[s].unique==t&&(this.chose=s)},"$store.state.detail.allInfo.productAttr":{handler:function(t,e){if(this.$store.state.detail.allInfo.productAttr.length){var s=this.$store.state.detail.allInfo.productAttr,i=[];s.forEach((function(t){t.attr_value.forEach((function(t){t.check&&i.push(t.attr)}))}));var a=this.$store.state.detail.allInfo.productValue;this.chose=i.join(","),a[i.join(",")]?this.unique=a[i.join(",")].unique:this.unique=0,this.$store.dispatch("detail/setUniqueAsync",this.unique)}},deep:!0}},created:function(){this.storeId=this.$route.params.id,this.init()},mounted:function(){window.addEventListener("scroll",this.handleScroll,!0)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)},beforeRouteLeave:function(t,e,s){this.$store.dispatch("detail/setUniqueAsync",""),s()}},st=et,it=(s("1829"),Object(h["a"])(st,i,a,!1,null,null,null));e["default"]=it.exports},c935:function(t,e,s){"use strict";s("f49c")},ea7d:function(t,e,s){"use strict";s("76fb")},f1d2:function(t,e,s){"use strict";s("3939")},f49c:function(t,e,s){},fce3:function(t,e,s){var i=s("d039"),a=s("da84"),n=a.RegExp;t.exports=i((function(){var t=n(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))}}]);
//# sourceMappingURL=chunk-749c406c.edb31442.js.map