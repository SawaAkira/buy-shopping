(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54afc6cd"],{"0c38":function(e,t,s){},"0cb2":function(e,t,s){var r=s("e330"),i=s("7b0b"),a=Math.floor,n=r("".charAt),c=r("".replace),o=r("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,h=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,s,r,u,d){var f=s+e.length,p=r.length,v=h;return void 0!==u&&(u=i(u),v=l),c(d,v,(function(i,c){var l;switch(n(c,0)){case"$":return"$";case"&":return e;case"`":return o(t,0,s);case"'":return o(t,f);case"<":l=u[o(c,1,-1)];break;default:var h=+c;if(0===h)return i;if(h>p){var d=a(h/10);return 0===d?i:d<=p?void 0===r[d-1]?n(c,1):r[d-1]+n(c,1):i}l=r[h-1]}return void 0===l?"":l}))}},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"14c3":function(e,t,s){var r=s("da84"),i=s("c65b"),a=s("825a"),n=s("1626"),c=s("c6b6"),o=s("9263"),l=r.TypeError;e.exports=function(e,t){var s=e.exec;if(n(s)){var r=i(s,e,t);return null!==r&&a(r),r}if("RegExp"===c(e))return i(o,e,t);throw l("RegExp#exec called on incompatible receiver")}},"23dd":function(e,t,s){},"2d3b":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"search",staticClass:"searchPage"},[s("div",{staticClass:"searchBox"},[s("info-search"),s("div",{staticClass:"searchNav"},[s("router-link",{staticClass:"name",class:{active:"默认"!=e.navName},attrs:{to:"/classify"}},[e._v(e._s(e.navName))]),s("div",{staticClass:"price",on:{click:e.priceClick}},[e._v(" 价格"),s("span",{class:{up:1==e.price,down:2==e.price}})]),s("div",{staticClass:"sales",on:{click:e.saleseClick}},[e._v(" 销量"),s("span",{class:{up:1==e.sales,down:2==e.sales}})]),s("div",{staticClass:"new",class:{active:1==e.news},on:{click:e.newClick}},[e._v(" 新品 ")])],1),e.listShow?s("search-list"):e._e(),e.moreShow?s("div",{staticClass:"moreLoading",domProps:{innerHTML:e._s(e.moreText)}},[s("span")]):e._e(),e.listShow?e._e():s("span",{staticClass:"loading"}),e.defaultTip?s("span",{staticClass:"defaultTip"}):e._e()],1)])},i=[],a=s("2909"),n=(s("ac1f"),s("841c"),s("99af"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"infoSearch"},[s("div",{staticClass:"searchBox"},[s("i",{staticClass:"bi bi-search"}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.keyword,expression:"keyword"}],attrs:{type:"text",placeholder:"搜索商品信息"},domProps:{value:e.keyword},on:{input:function(t){t.target.composing||(e.keyword=t.target.value)}}}),s("div",{staticClass:"btn",on:{click:function(t){return e.search(e.keyword)}}},[e._v("搜索")])]),s("div",{staticClass:"changeBtn",class:e.$store.state.search.isList?"list":"",on:{click:e.change}})])}),c=[],o=(s("5319"),s("5b81"),{data:function(){return{keyword:"",isList:!1}},methods:{search:function(e){e.replaceAll(" ","")?this.$store.dispatch("search/setKeywordAsync",e):this.errorTip("输入框不能为空")},change:function(){this.$store.dispatch("search/setIsListAsync",!this.$store.state.search.isList)},errorTip:function(e){var t=this;this.$store.dispatch("setErrorTipShowAsync",!0),this.$store.dispatch("setErrorTipAsync",e);var s=setTimeout((function(){t.$store.dispatch("setErrorTipShowAsync",!1),t.$store.state.isErrorTipShow||clearInterval(s)}),1500)}}}),l=o,h=(s("3eea"),s("2877")),u=Object(h["a"])(l,n,c,!1,null,null,null),d=u.exports,f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:e.$store.state.search.isList?"searchList":"searchCascades"},e._l(e.$store.state.search.searchInfo,(function(t){return s("div",{key:t.id,staticClass:"searchItem",on:{click:function(s){return e.toSearchItem(t.id)}}},[s("div",{staticClass:"imgBox"},[s("img",{attrs:{src:t.image,onerror:e.errorImg,alt:""}})]),s("div",{staticClass:"textBox"},[s("div",{staticClass:"title text_ellipsis"},[e._v(e._s(t.store_name))]),s("div",{staticClass:"now_price"},[e._v("￥"+e._s(t.price))]),s("div",{staticClass:"bottomBox"},[s("div",{staticClass:"vip_price"},[e._v("￥"+e._s(t.vip_price)),s("span",[e._v("VIP")])]),s("div",{staticClass:"salesNum"},[e._v("已售"+e._s(t.sales)+"件")])])])])})),0)},p=[],v={data:function(){return{errorImg:'this.src="'+s("04ec")+'"'}},methods:{toSearchItem:function(e){this.$router.push("/detail/"+e)}}},g=v,m=(s("c33d"),Object(h["a"])(g,f,p,!1,null,null,null)),w=m.exports,x={data:function(){return{page:1,limit:8,keyword:"",sid:"",news:0,priceOrder:"",salesOrder:"",navName:"默认",price:0,sales:0,listShow:!1,defaultTip:!1,times:0,moreText:"<span></span>正在加载，不要急~",searchInfo:"",moreShow:!1}},components:{InfoSearch:d,SearchList:w},methods:{priceClick:function(){this.price++,this.price>=3&&(this.price=0),0==this.price?this.priceOrder="":1==this.price?this.priceOrder="asc":2==this.price&&(this.priceOrder="desc"),this.page=1,this.getSearchData()},saleseClick:function(){this.sales++,this.sales>=3&&(this.sales=0),0==this.sales?this.salesOrder="":1==this.sales?this.salesOrder="asc":2==this.sales&&(this.salesOrder="desc"),this.page=1,this.getSearchData()},newClick:function(){0==this.news?this.news=1:this.news=0,this.page=1,this.getSearchData()},getSearchData:function(){var e=this;this.listShow=!1,this.times=0,this.moreShow=!1,this.moreText="<span></span>正在加载，不要急~",axios({method:"GET",url:"http://47.115.51.185/api/products",params:{page:this.page,limit:this.limit,keyword:this.keyword,sid:this.sid,news:this.news,priceOrder:this.priceOrder,salesOrder:this.salesOrder}}).then((function(t){200==t.data.status&&(e.times++,e.listShow=!0,e.defaultTip=!1,e.searchInfo=t.data.data,e.$store.dispatch("search/setSearchInfoAsync",e.searchInfo),0==e.searchInfo.length&&(e.defaultTip=!0),e.searchInfo.length<e.limit?e.moreShow=!1:e.moreShow=!0)}))},getMoreData:function(){var e=this;axios({method:"GET",url:"http://47.115.51.185/api/products",params:{page:this.page,limit:this.limit,keyword:this.keyword,sid:this.sid,news:this.news,priceOrder:this.priceOrder,salesOrder:this.salesOrder}}).then((function(t){if(200==t.data.status){e.times++;var s=e.$store.state.search.searchInfo;e.searchInfo=[].concat(Object(a["a"])(e.searchInfo),Object(a["a"])(t.data.data)),e.searchInfo.length==s.length&&(e.moreText="我是有底线的！！！"),e.$store.dispatch("search/setSearchInfoAsync",e.searchInfo)}}))},handleScroll:function(){var e=this;this.$nextTick((function(){if(e.$refs.search){var t=e.$refs.search.clientHeight,s=e.$refs.search.scrollTop,r=e.$refs.search.scrollHeight;setTimeout((function(){t+s==r&&(e.$store.state.search.searchInfo.length>=e.times*e.limit?(e.page++,e.getMoreData()):e.moreText="我是有底线的！！！")}),300)}}))}},created:function(){this.$route.query.w&&(this.keyword=this.$route.query.w),this.$route.query.title&&(this.navName=this.$route.query.title),this.$route.query.id&&(this.sid=this.$route.query.id),this.getSearchData()},watch:{"$store.state.search.keyword":{handler:function(e,t){this.keyword=e,this.getSearchData()}},"$store.state.search.searchInfo":function(e){console.log(e)}},mounted:function(){window.addEventListener("scroll",this.handleScroll,!0)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)},beforeRouteEnter:function(e,t,s){document.title=e.meta.title,s()}},$=x,b=(s("9ed0"),Object(h["a"])($,r,i,!1,null,null,null));t["default"]=b.exports},"3eea":function(e,t,s){"use strict";s("23dd")},"44e7":function(e,t,s){var r=s("861d"),i=s("c6b6"),a=s("b622"),n=a("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[n])?!!t:"RegExp"==i(e))}},5319:function(e,t,s){"use strict";var r=s("2ba4"),i=s("c65b"),a=s("e330"),n=s("d784"),c=s("d039"),o=s("825a"),l=s("1626"),h=s("5926"),u=s("50c4"),d=s("577e"),f=s("1d80"),p=s("8aa5"),v=s("dc4a"),g=s("0cb2"),m=s("14c3"),w=s("b622"),x=w("replace"),$=Math.max,b=Math.min,y=a([].concat),k=a([].push),S=a("".indexOf),_=a("".slice),I=function(e){return void 0===e?e:String(e)},C=function(){return"$0"==="a".replace(/./,"$0")}(),T=function(){return!!/./[x]&&""===/./[x]("a","$0")}(),O=!c((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));n("replace",(function(e,t,s){var a=T?"$":"$0";return[function(e,s){var r=f(this),a=void 0==e?void 0:v(e,x);return a?i(a,e,r,s):i(t,d(r),e,s)},function(e,i){var n=o(this),c=d(e);if("string"==typeof i&&-1===S(i,a)&&-1===S(i,"$<")){var f=s(t,n,c,i);if(f.done)return f.value}var v=l(i);v||(i=d(i));var w=n.global;if(w){var x=n.unicode;n.lastIndex=0}var C=[];while(1){var T=m(n,c);if(null===T)break;if(k(C,T),!w)break;var O=d(T[0]);""===O&&(n.lastIndex=p(c,u(n.lastIndex),x))}for(var E="",A=0,L=0;L<C.length;L++){T=C[L];for(var D=d(T[0]),M=$(b(h(T.index),c.length),0),N=[],R=1;R<T.length;R++)k(N,I(T[R]));var j=T.groups;if(v){var q=y([D],N,M,c);void 0!==j&&k(q,j);var B=d(r(i,void 0,q))}else B=g(D,c,M,N,j,i);M>=A&&(E+=_(c,A,M)+B,A=M+D.length)}return E+_(c,A)}]}),!O||!C||T)},"5b81":function(e,t,s){"use strict";var r=s("23e7"),i=s("da84"),a=s("c65b"),n=s("e330"),c=s("1d80"),o=s("1626"),l=s("44e7"),h=s("577e"),u=s("dc4a"),d=s("ad6d"),f=s("0cb2"),p=s("b622"),v=s("c430"),g=p("replace"),m=RegExp.prototype,w=i.TypeError,x=n(d),$=n("".indexOf),b=n("".replace),y=n("".slice),k=Math.max,S=function(e,t,s){return s>e.length?-1:""===t?s:$(e,t,s)};r({target:"String",proto:!0},{replaceAll:function(e,t){var s,r,i,n,d,p,_,I,C,T=c(this),O=0,E=0,A="";if(null!=e){if(s=l(e),s&&(r=h(c("flags"in m?e.flags:x(e))),!~$(r,"g")))throw w("`.replaceAll` does not allow non-global regexes");if(i=u(e,g),i)return a(i,e,T,t);if(v&&s)return b(h(T),e,t)}n=h(T),d=h(e),p=o(t),p||(t=h(t)),_=d.length,I=k(1,_),O=S(n,d,0);while(-1!==O)C=p?h(t(d,O,n)):f(d,n,O,[],void 0,t),A+=y(n,E,O)+C,E=O+_,O=S(n,d,O+I);return E<n.length&&(A+=y(n,E)),A}})},"841c":function(e,t,s){"use strict";var r=s("c65b"),i=s("d784"),a=s("825a"),n=s("1d80"),c=s("129f"),o=s("577e"),l=s("dc4a"),h=s("14c3");i("search",(function(e,t,s){return[function(t){var s=n(this),i=void 0==t?void 0:l(t,e);return i?r(i,t,s):new RegExp(t)[e](o(s))},function(e){var r=a(this),i=o(e),n=s(t,r,i);if(n.done)return n.value;var l=r.lastIndex;c(l,0)||(r.lastIndex=0);var u=h(r,i);return c(r.lastIndex,l)||(r.lastIndex=l),null===u?-1:u.index}]}))},"8aa5":function(e,t,s){"use strict";var r=s("6547").charAt;e.exports=function(e,t,s){return t+(s?r(e,t).length:1)}},"9ed0":function(e,t,s){"use strict";s("c6f7")},c33d:function(e,t,s){"use strict";s("0c38")},c6f7:function(e,t,s){},d784:function(e,t,s){"use strict";s("ac1f");var r=s("e330"),i=s("6eeb"),a=s("9263"),n=s("d039"),c=s("b622"),o=s("9112"),l=c("species"),h=RegExp.prototype;e.exports=function(e,t,s,u){var d=c(e),f=!n((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),p=f&&!n((function(){var t=!1,s=/a/;return"split"===e&&(s={},s.constructor={},s.constructor[l]=function(){return s},s.flags="",s[d]=/./[d]),s.exec=function(){return t=!0,null},s[d](""),!t}));if(!f||!p||s){var v=r(/./[d]),g=t(d,""[e],(function(e,t,s,i,n){var c=r(e),o=t.exec;return o===a||o===h.exec?f&&!n?{done:!0,value:v(t,s,i)}:{done:!0,value:c(s,t,i)}:{done:!1}}));i(String.prototype,e,g[0]),i(h,d,g[1])}u&&o(h[d],"sham",!0)}}}]);
//# sourceMappingURL=chunk-54afc6cd.e82f2235.js.map